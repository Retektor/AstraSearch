# AstraSearch

## Содержание
- [Установка проекта](#установка-проекта)
- [Зависимости](#зависимости)
- [Подключение базы данных](#подключение-базы-данных)
- [Документация](#документация)

## Установка проекта
1. Устанавливаем необходимые [зависимости]
2. Устанавливаем код через `https://github.com/Retektor/AstraSearch.git` или распаковкой архива в папку.
3. [Настраиваем базу данных](#Подключение-базы-данных)
4. Используя командную консоль, переходим в корень проекта и запускаем команду `mvnw spring-boot:run` (Maven Wrapper) либо `mvn spring-boot:run` (если установлен Maven)
5. Сайт будет доступен по адресу `localhost:8080`

## Зависимости
### Обязательно
- [Java Development Kit 25](https://www.oracle.com/java/technologies/downloads/) – набор для запуска проекта
- [PostgreSQL](https://www.postgresql.org/download/) – СУБД для работы сервиса

### Опционально
- [Docker](https://www.docker.com/products/docker-desktop/) – проверка работы тестов с БД
- [Postman](https://www.postman.com/downloads/) – проверка работы API (можно использовать `curl`)

## Подключение базы данных
Проект использует **PostgreSQL** – СУБД с клиентско-серверной архитектурой.
Для создания БД:
1. Скачайте и установите [PostgreSQL](https://www.postgresql.org/download/)
2. В корне проекта предоставлен файл `dump.sql` со структурой таблиц и тестовыми данными
3. Создайте пустую БД с названием `astrasearch`
4. Используйте pgAdmin 4 или командную утилиту psql для импорта базы данных

Spring Framework использует следующие параметры для подключения к БД:
- Хост: localhost
- Порт: 5432
- База данных: astrasearch
- Пользователь: postgres
- Пароль: <СВОЙ_ПАРОЛЬ>

Для редактирования этих параметров обратитесь к файлу `application-local.properties` по пути `src/main/resources`

## Документация
Для взаимодействия с API рекомендуется использовать средства, которые умеют отправлять HTTP-запросы (`curl`, `Postman`)

На данный момент в API приложения доступны следующие методы по адресам:

`(GET)  /api/users/{username}` - возвращает объект пользователя, если такой существует или 404, если его не существует
`(POST) /api/create` - создаёт и возвращает объект небесного тела в зависимости от передаваемых данных. Для подробного описания процесса см. [Создание небесного тела](#создание-небесного-тела)

Пользователь:
| Атрибут | Тип данных | Описание |
|---------|------------|----------|
| id | Auto-increment integer | Скрытый атрибут для PostgreSQL |
| username | String | Имя пользователя |
| password | String | Пароль |
| firstName | String | Имя |
| lastName | String | Фамилия |
| email | String | Электронная почта |

Небесное тело:
| Атрибут | Тип данных | Описание |
|---------|------------|----------|
| id | Auto-increment integer | Скрытый атрибут для PostgreSQL
| userId | Long | ID пользователя, добавившего небесное тело
| name | String | Название небесного тела
| description | String | Описание тела
| bodyType | BodyType (Enum) | Тип тела (доступны PLANET, STAR)
| discoveryTime | LocalDateTime | Время открытия
| imageId | Long | ID изображения, которое можно прикрепить к объекту
| rightAscension | BigDecimal | Прямое восхождение – координата объекта на небе, которая не меняется при вращении Земли (постоянна)
| declination | BigDecimal | Склонение – вторая координата объекта на небе, которая не меняется при вращении Земли (постоянна)

Изображения:
| Атрибут | Тип данных | Описание |
|---------|------------|----------|
| id | Auto-increment integer | Скрытый атрибут для PostgreSQL
| url | String | Ссылка на изображение
| caption | String | Подпись к изображению

### Создание небесного тела
При создании небесного тела используются почти все (кроме id) атрибуты + TYPE_SPECIFIC_DATA. В зависимости от `bodyType`, можно создать объекты разных типов используя одну и ту же форму запроса:
